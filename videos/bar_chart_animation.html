<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bar chart animation</title>
  <style>
    body {
      margin: 0;
      background: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    canvas {
      background: white;
      display: block;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 10px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
  </head>
    <body>
        <canvas id="myCanvas" width="960" height="540"></canvas>  <!-- for testing animation -->
        <!-- <canvas id="myCanvas" width="1920" height="1080"></canvas> -->  <!-- Full HD size -->

        <button id="recordBtn">Start Recording</button>

        <script src="js/recording.js"></script>
        <script>
            const duration = 10; // seconds
            const numberStart = 100;
            const numberEnd = 200;

            const rectY = 150, rectW = 200, rectH = 100;
            const startX = 0;
            const endX = canvas.width - rectW;

            let startTime = null;

            function animate(timestamp) {
                if (!startTime) startTime = timestamp;
                const elapsed = (timestamp - startTime) / 1000; // seconds

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                if (elapsed <= duration) {
                    // Calculate animation progress (0 to 1)
                    const progress = elapsed / duration;

                    // Rectangle X position (left to right)
                    const rectX = startX + (endX - startX) * progress;

                    // Countdown number from 100 to 200
                    const number = numberStart + (numberEnd - numberStart) * progress;

                    // Draw rectangle
                    ctx.fillStyle = 'skyblue';
                    ctx.fillRect(rectX, rectY, rectW, rectH);

                    // Draw number centered inside rectangle
                    ctx.fillStyle = 'black';
                    ctx.font = '48px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(Math.floor(number), rectX + rectW / 2, rectY + rectH / 2);
                }

                if (elapsed < duration) {
                    requestAnimationFrame(animate);
                }
            }

            requestAnimationFrame(animate);
        
        </script>
    </body>
</html>